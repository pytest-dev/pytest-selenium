language: python
sudo: false
python:
  - 2.6
  - 2.7
  - 3.3
  - 3.4
  - pypy
  - pypy3
env:
  global:
    - DISPLAY=':99.0'
  matrix:
    - PYTEST=2.7.3
    - PYTEST=2.8.3
matrix:
  fast_finish: true
  allow_failures:
    - python: 3.3
    - python: 3.4
    - python: pypy3
install:
  - pip install flake8
  - pip install -q pytest==$PYTEST
  - pip install -q -e .
before_script:
  - sh -e /etc/init.d/xvfb start
  - flake8 .
script: py.test testing -m 'not chrome'
